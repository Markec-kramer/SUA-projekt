
filip.skrget@Filips-MacBook-Pro-2 ~ % curl -X POST http://localhost:4001/users/register \
  -H "Content-Type: application/json" \
  -d '{"email":"jwt@test.com","password":"test","name":"JWT Test"}'
{"message":"Error creating user"}%                                              filip.skrget@Filips-MacBook-Pro-2 ~ % curl -X POST http://localhost:4001/users/register \
  -H "Content-Type: application/json" \
  -d '{"email":"jwt2@test.com","password":"test","name":"JWT Test"}'
{"id":7,"email":"jwt2@test.com","name":"JWT Test"}%                             filip.skrget@Filips-MacBook-Pro-2 ~ % LOGIN_RESPONSE=$(curl -s -X POST http://localhost:4001/users/login \
  -H "Content-Type: application/json" \
  -d '{"email":"jwt@test.com","password":"test"}')

echo "$LOGIN_RESPONSE"
{"id":5,"email":"jwt@test.com","name":"JWT Test","token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1IiwibmFtZSI6IkpXVCBUZXN0IiwiaWF0IjoxNzY1Nzg0OTc4LCJleHAiOjE3NjU3ODg1Nzh9.S6PKGFA1GFRW0QMwNWNsJAnOocYp2KNGeY8--YCP5MEWyKle-OI0HD7JeHWeSqZVcG51oYSGVza0yLZ-cGBmF_ZdI4L1wPugLgp_Z1OIJoPfoX0FlYsbD7AuahqHXjB9b_HgL3UmCcIJM8h-g5Xfi4wvnF1BbDGRjd8KiMrJ8jQPmiq2Vhzee7sAPODDaC1VJNtyRvLUX2XvM2blDYmwD4nV9wf_vQ1bP4cYl3qpAsnJRU6JhPy0IHI8hMBkUe0nv_qOxDzJyACQQ-MSlzDzFciAyLuWeuHUYkKMvE-M-vgVnMod7mCRGpO3DmJJjasxEUX5jrogRDRmZFVMhR1UTg"}


TOKEN=$(echo "$LOGIN_RESPONSE" | jq -r '.token')
echo "$TOKEN"
eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1IiwibmFtZSI6IkpXVCBUZXN0IiwiaWF0IjoxNzY1Nzg0OTc4LCJleHAiOjE3NjU3ODg1Nzh9.S6PKGFA1GFRW0QMwNWNsJAnOocYp2KNGeY8--YCP5MEWyKle-OI0HD7JeHWeSqZVcG51oYSGVza0yLZ-cGBmF_ZdI4L1wPugLgp_Z1OIJoPfoX0FlYsbD7AuahqHXjB9b_HgL3UmCcIJM8h-g5Xfi4wvnF1BbDGRjd8KiMrJ8jQPmiq2Vhzee7sAPODDaC1VJNtyRvLUX2XvM2blDYmwD4nV9wf_vQ1bP4cYl3qpAsnJRU6JhPy0IHI8hMBkUe0nv_qOxDzJyACQQ-MSlzDzFciAyLuWeuHUYkKMvE-M-vgVnMod7mCRGpO3DmJJjasxEUX5jrogRDRmZFVMhR1UTg

echo "$TOKEN" | cut -d '.' -f2 | base64 --decode